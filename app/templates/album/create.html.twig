{% extends 'base.html.twig' %}

{% block title %}New Album | Bandito{% endblock %}

{% block body %}
<div class="min-h-screen bg-cover bg-center py-12">
    <div class="max-w-3xl mx-auto bg-black/70 backdrop-blur-md rounded-2xl shadow-xl p-8 space-y-6 border-2 border-yellow-500/60">
        <div class="flex items-center justify-between">
            <h1 class="text-3xl font-bold text-yellow-50 flex items-center gap-3">
                <svg class="size-8 text-yellow-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="8" /><circle cx="12" cy="12" r="3" /></svg>
                Create New Album
            </h1>
            <a href="{{ path('album_list') }}" class="text-yellow-400 hover:text-yellow-300 text-base font-semibold inline-flex items-center gap-2 transition">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                </svg>
                Back to list
            </a>
        </div>

        {{ form_start(form, {
            attr: {
                class: 'grid grid-cols-1 sm:grid-cols-2 gap-6',
                enctype: 'multipart/form-data'
            }
        }) }}

            <!-- Title -->
            <div class="col-span-full">
                {{ form_label(form.title, null, { label_attr: { class: 'text-yellow-400 font-semibold' } }) }}
                {{ form_widget(form.title, {
                    attr: {
                        class: 'mt-1 w-full bg-zinc-800/80 text-yellow-50 placeholder-gray-400 border border-gray-700 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 px-4 py-2 transition'
                    }
                }) }}
                {{ form_errors(form.title) }}
            </div>

            <!-- Release Date -->
            <div class="col-span-full">
                {{ form_label(form.release_date, null, { label_attr: { class: 'text-yellow-400 font-semibold' } }) }}
                {{ form_widget(form.release_date, {
                    attr: {
                        class: 'form-input block mt-1 w-full bg-zinc-800/80 text-yellow-50 placeholder-gray-400 border border-gray-700 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 px-4 py-2 transition'}}) }}
                {{ form_errors(form.release_date) }}
            <div/>

            <!-- Divider -->
            <hr class="col-span-full border-t border-yellow-500/30 my-4" />

            <!-- Duration -->
            <div class="col-span-full">
                {{ form_label(form.duration, null, { label_attr: { class: 'text-yellow-400 font-semibold' } }) }}
                {{ form_widget(form.duration, {
                    attr: {
                        class: 'form-input block mt-1 w-full bg-zinc-800/80 text-yellow-50 placeholder-gray-400 border border-gray-700 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 px-4 py-2 transition'}}) }}
                {{ form_errors(form.duration) }}
            <div/>

            <!-- Divider -->
            <hr class="col-span-full border-t border-yellow-500/30 my-4" />

            <!-- Description -->
            <div class="col-span-full">
                {{ form_label(form.description, null, { label_attr: { class: 'text-yellow-400 font-semibold' } }) }}
                {{ form_widget(form.description, {
                    attr: {
                        class: 'mt-1 w-full bg-zinc-800/80 text-yellow-50 border border-gray-700 rounded-lg px-4 py-2 focus:ring-yellow-500 focus:border-yellow-500 transition',
                        rows: 5
                    }
                }) }}
                {{ form_errors(form.description) }}
            </div>

            <!-- Divider -->
            <hr class="col-span-full border-t border-yellow-500/30 my-4" />

            <!-- Links -->
            {% include 'components/links.html.twig' %}

            <!-- Divider -->
            <hr class="col-span-full border-t border-yellow-500/30 my-4" />

            <!-- Cover Image Upload -->
            <div class="col-span-full">
                {{ form_label(form.coverImageFile, null, { label_attr: { class: 'text-yellow-400 font-semibold' } }) }}
                    <div class="mt-2 flex items-center gap-4">
                        {{ form_widget(form.coverImageFile, {
                            attr: {
                                class: 'text-yellow-50 file:bg-yellow-500 file:text-black file:rounded-lg file:px-4 file:py-2 file:font-medium hover:file:bg-yellow-400 transition cursor-pointer'
                            }
                        }) }}
                    </div>
                {{ form_errors(form.coverImageFile) }}
            </div>

            <!-- Divider -->
            <hr class="col-span-full border-t border-yellow-500/30 my-4" />

            <!-- Genres -->
            <div class="col-span-full">
                {{ form_label(form.genres, null, { label_attr: { class: 'text-yellow-400 font-semibold block mb-1' } }) }}
                {{ form_widget(form.genres, {
                    attr: {
                        class: 'genre-select w-full'
                    }
                }) }}
                {{ form_errors(form.genres) }}
            </div>

            <!-- Bands -->
            <div class="col-span-full">
                {{ form_label(form.bands, null, { label_attr: { class: 'text-yellow-400 font-semibold block mb-1' } }) }}
                {{ form_widget(form.bands, {
                    attr: {
                        class: 'band-select w-full'
                    }
                }) }}
                {{ form_errors(form.bands) }}
            </div>

            <!-- Musicians -->
            <div class="col-span-full">
                {{ form_label(form.musicians, null, { label_attr: { class: 'text-yellow-400 font-semibold block mb-1' } }) }}
                {{ form_widget(form.musicians, {
                    attr: {
                        class: 'musician-select w-full'
                    }
                }) }}
                {{ form_errors(form.musicians) }}
            </div>

            <!-- Songs -->
            <div class="col-span-full">
                {{ form_label(form.songs, 'Songs', {
                    label_attr: { class: 'text-yellow-400 font-semibold block mb-1' }
                    }) }}
                {{ form_widget(form.songs, {
                    id: 'song-select',
                    attr: {
                        class: 'song-autocomplete w-full rounded-md bg-gray-900 text-white',
                        'data-autocomplete-url': path('autocomplete_songs')
                    }
                }) }}
                {{ form_errors(form.songs) }}
            </div>

            <!-- Divider -->
            <hr class="col-span-full border-t border-yellow-500/30 my-4" />

            <!-- Submit -->
            <div class="col-span-full flex justify-end gap-4 mt-4">
                <a href="{{ path('album_list') }}"
                    class="inline-block px-6 py-2 font-semibold bg-red-600 rounded-xl text-white custom-shadow hover:text-yellow-400 transition shadow-md hover:-translate-y-0.5">
                    Cancel
                </a>
                <button type="submit"
                    class="inline-flex items-center gap-2 bg-yellow-500 custom-shadow cursor-pointer text-black font-semibold px-6 py-2 rounded-2xl shadow-md transition hover:-translate-y-0.5">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/>
                    </svg>
                    Create Album
                </button>
            </div>

        {{ form_row(form._token) }}

        {{ form_end(form, { render_rest: false }) }}
    </div>
</div>
{% endblock %}
